<main>
  <div class="container px-5 px-sm-0">
    <div id="error_explanation">
      <% if @book.errors.any? %>
        <h3><%= @book.errors.count %>errors prohibited this obj from being saved: </h3>
        <ul>
          <% @book.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      <% end %>
    </div>

    <div class="row">


      <%= render 'users/form', user: @user,book: @book %>   <!--form共有部分-->

      <div class="col-md-8 offset-md-1">
        <h2>Books</h2>
        <table class="table table-hover table-inverse">
          <thead>
            <tr>
              <th></th>
              <th>Title</th>
              <th>Opinion</th>
              <th></th>
              <th></th>
              <th colspan="5"></th>
            </tr>
          </thead>
          <tbody>
            <% @books.each do |book| %>
              <tr>
                <th>
                  <%= link_to image_tag(book.user.get_profile_image(80,80)),user_path(book.user.id) %>
                </th>
                <th><%= link_to book.title,book_path(book.id) %></th>
                <th><%= book.body %></th>
                <!--いいね機能-->
                <td id="favorite_buttons_<%= book.id %>">
                  <%= render "favorites/favorite-btn" ,books: book %>
                </td>
                <!--コメントカウント-->
                <td>
                  <%= render "book_comments/comment-count" ,books: book %>
                </td>
                <th colspan="5"></th>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</main>

